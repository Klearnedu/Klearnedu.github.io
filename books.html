<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>教科書検索</title>

<style>
@font-face {
  font-family: 'honoka';
  src: url('Honoka-Shin-Maru-Gothic_R.otf') format('opentype');
}

:root{
  --bg:#ffffff;
  --accent:#2563eb;
  --text:#111827;
  --card:#ffffff;
}

body.dark{
  --bg:#071026;
  --text:#d4e0ff;
  --accent:#4095ff;
  --card:#0f172a;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:honoka,system-ui,-apple-system,Segoe UI,Roboto,
    "Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:background .3s,color .3s;
}

/* ヘッダー */
header{
  padding:24px;
}

.logo-area{
  position:relative;
  display:inline-block;
}

.logo{
  display:inline-flex;
  align-items:center;
  gap:8px;
  text-decoration:none;
  color:var(--text);
  font-weight:600;
  font-size:16px;
}

.logo img{
  height:40px;
}

/* サイドバー */
.sidebar{
  position:fixed;
  top:0;
  left:0;
  height:100vh;
  width:260px;
  background:#f9fafb;
  padding:120px 24px 24px;
  box-shadow:2px 0 10px rgba(0,0,0,0.08);
  transform:translateX(-100%);
  transition:transform .3s ease, background .3s;
  z-index:1000;
  display:flex;
  flex-direction:column;
}

body.dark .sidebar{
  background:#1e293b;
}

.logo-area:hover .sidebar{
  transform:translateX(0);
}

.sidebar ul{
  list-style:none;
  padding:0;
  margin:0;
  flex:1;
}

.sidebar li{
  margin-bottom:16px;
}

.sidebar a{
  display:block;
  font-size:18px;
  text-decoration:none;
  color:var(--text);
  padding:8px 4px;
  border-radius:8px;
  transition:background .15s;
}

.sidebar a:hover{
  background:rgba(37,99,235,0.08);
  color:var(--accent);
}

/* テーマボタン */
.theme-toggle{
  padding-top:20px;
  border-top:1px solid #e5e7eb;
}

body.dark .theme-toggle{
  border-top:1px solid #334155;
}

.theme-toggle button{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
  background:var(--accent);
  color:white;
  font-weight:600;
  transition:opacity .15s;
}

.theme-toggle button:hover{
  opacity:0.85;
}

/* コンテナ */
.container{
  max-width:1400px;
  margin:40px auto 80px;
  padding:0 24px;
  text-align:center;
}

h1{
  font-size:40px;
  margin-bottom:24px;
  font-weight:800;
}

/* 検索UI */
.row{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-bottom:16px;
}

input[type="search"]{
  width:400px;
  max-width:100%;
  padding:12px 16px;
  border-radius:12px;
  border:1px solid #e5e7eb;
  font-size:16px;
  transition:border .2s, box-shadow .2s;
}

input[type="search"]:focus{
  outline:none;
  border:1px solid var(--accent);
  box-shadow:0 0 0 3px rgba(37,99,235,0.15);
}

button{
  padding:12px 18px;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:opacity .2s;
}

button:hover{
  opacity:.85;
}

.meta{
  margin-bottom:30px;
  font-size:14px;
  opacity:.7;
}

/* グリッド */
#items{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:40px;
  padding:0;
  list-style:none;
}

.item{
  background:var(--card);
  padding:16px;
  border-radius:20px;
  transition:transform .25s ease, box-shadow .25s ease;
}

.item:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 40px rgba(0,0,0,0.15);
}

.item img{
  width:100%;
  height:220px;
  object-fit:cover;
  border-radius:16px;
  margin-bottom:12px;
}

.item span{
  font-weight:600;
}
</style>
</head>

<body>

<header>
<div class="logo-area">
<a href="index.html" class="logo">
<img src="logo.png" alt="Klearnロゴ">
<span>Klearn</span>
</a>

<nav class="sidebar">
<ul>
<li><a href="home.html">ホーム</a></li>
<li><a href="NPO.html">このNPOについて</a></li>
<li><a href="index.html">パスワードを打つ</a></li>
<li><a href="books.html">教科書を検索する</a></li>
</ul>

<div class="theme-toggle">
<button id="themeBtn">DARK MODE</button>
</div>

</nav>
</div>
</header>

<div class="container">
<h1>検索で画像を探す</h1>

<div class="row">
<label for="q">自動検索</label>
<input id="q" type="search" placeholder="ここに入力して検索" autocomplete="off" />
<button id="clear" type="button">クリア</button>
</div>

<p class="meta"><span id="count"></span></p>

<ul id="items">
<!-- ここは元のliそのままでOK -->
</ul>
</div>

<script>
// テーマ切替
const themeBtn = document.getElementById("themeBtn");

themeBtn.addEventListener("click", () => {
document.body.classList.toggle("dark");

if(document.body.classList.contains("dark")){
themeBtn.textContent = "LIGHT MODE";
} else {
themeBtn.textContent = "DARK MODE";
}
});

// 検索機能
const input = document.getElementById("q");
const clearBtn = document.getElementById("clear");
const list = document.getElementById("items");
const count = document.getElementById("count");

const items = Array.from(list.querySelectorAll("li")).map(li => ({
el: li,
text: (li.textContent + " " + (li.dataset.tags || "")).normalize("NFKC").toLowerCase()
}));

function update(){
const q = input.value.normalize("NFKC").trim().toLowerCase();
let shown = 0;

for(const item of items){
const match = q === "" || item.text.includes(q);
item.el.hidden = !match;
if(match) shown++;
}

count.textContent = `表示：${shown} / ${items.length}`;
}

input.addEventListener("input", update);

clearBtn.addEventListener("click", ()=>{
input.value="";
input.focus();
update();
});

update();
</script>

</body>
</html>
